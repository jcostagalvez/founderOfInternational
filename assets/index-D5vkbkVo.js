var e=Object.defineProperty,s=(s,t,i)=>((s,t,i)=>t in s?e(s,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):s[t]=i)(s,"symbol"!=typeof t?t+"":t,i);import{p as t}from"./phaser-CbbPO0sM.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))s(e);new MutationObserver((e=>{for(const t of e)if("childList"===t.type)for(const e of t.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&s(e)})).observe(document,{childList:!0,subtree:!0})}function s(e){if(e.ep)return;e.ep=!0;const s=function(e){const s={};return e.integrity&&(s.integrity=e.integrity),e.referrerPolicy&&(s.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?s.credentials="include":"anonymous"===e.crossOrigin?s.credentials="omit":s.credentials="same-origin",s}(e);fetch(e.href,s)}}();class i extends t.Scene{constructor(){super("Boot")}preload(){this.load.image("background","assets/fondos/bg.png"),this.load.image("Karl","assets/utilidades/Karl.png"),this.load.image("Martillo_hoz","assets/utilidades/Martillo_hoz.png"),this.load.image("level_1","assets/fondos/Imagen_1_nivel.jpg"),this.load.audio("bullet_shot","assets/sound/cannon_shot.mp3"),this.load.image("bg","assets/utilidades/Martillo_hoz.png"),this.load.image("anarquist","assets/utilidades/Anarquista.png"),this.load.image("capitalist","assets/utilidades/Capitalista.png"),this.load.image("vida","assets/utilidades/vida.png"),this.load.image("dialogo","assets/fondos/cuadro_dialogo.png"),this.load.image("fondo_victoria","assets/fondos/fondo_victoria.jpg"),this.load.image("fondo_derrota","assets/fondos/fondo_derrota.jpg"),this.load.image("0","assets/utilidades/numeros/0.png"),this.load.image("1","assets/utilidades/numeros/1.png"),this.load.image("2","assets/utilidades/numeros/2.png"),this.load.image("3","assets/utilidades/numeros/3.png"),this.load.image("4","assets/utilidades/numeros/4.png"),this.load.image("5","assets/utilidades/numeros/5.png"),this.load.image("6","assets/utilidades/numeros/6.png"),this.load.image("7","assets/utilidades/numeros/7.png"),this.load.image("8","assets/utilidades/numeros/8.png"),this.load.image("9","assets/utilidades/numeros/9.png")}create(){this.scene.start("MainMenu")}}const a={winScore:500,score:0,health:100,textos:{introduccion:"Es el A침o 1864 y en Londres se junta Marx y Bakunin para fundar la primera internacional del trabajador. \n Tienes una tarea muy importante, la cual es recoger 500 puntos para agrupar fuerzas y evitar los ataques de las ratas capitalsita.",bakunin:"Buenas, Soy Bakunin cuando me veas en el juego, debes recogerme para agrupar fuerzas y juntos forma la primera internacional. \n \n ANARQUIA Y BIRRA FRIA CAMARADA",capitalista:"Buenas soy Alan Smith o su fantasma por la cronologia, sea como sea mi espectro intentara desbirtuar vuestro intento de generar un poder obrero. \n Cuando aparezca en el Juego debes evitarme, si entro en contacto contigo perderas una vida y solo tienes tres. \n \n LIBERTAD CARAJO",ganador:"Has conseguido dar el primer paso en la formaci칩n de un movimiento obrero internacional. \n \n tardara menos de cuatro a침os en destruirse (Lo que tiene dormir con Anarquistas)",perdedor:"El capitalismo ha ganado, debido a tu mal desempe침o despidete de la jornada de ocho horas o las subidas de salario. \n \n Despierta a tu hijo para que trabaje."}};class o{constructor(e){s(this,"personaje"),s(this,"life"),s(this,"lifeVisual"),s(this,"pointsToWin"),s(this,"points",0),s(this,"visualPoints"),this.scene=e,this.controller=this.scene.input.keyboard.createCursorKeys()}setPersonaje(e,s,t){this.personaje=this.scene.physics.add.sprite(e,s,t),this.personaje.setCollideWorldBounds(!0),this.personaje.setScale(.85)}keyMovements(){this.controller.left.isDown?this.personaje.setVelocityX(-400):this.controller.right.isDown?this.personaje.setVelocityX(400):this.personaje.setVelocityX(0)}onTouchMovements(){this.personaje.setInteractive(),this.scene.input.setDraggable(this.personaje),this.personaje.on("drag",((e,s)=>{this.personaje.x=s}))}setLife(e,s){this.life=e,this.lifeVisual=this.scene.physics.add.group();for(let t=0;t<e;t++){let e=this.scene.physics.add.sprite(s+50*t,100,"vida");this.lifeVisual.add(e)}}restLife(e){this.life-=e,0==this.life?(this.scene.physics.pause(),this.scene.scene.start("GameEnd")):this.lifeVisual.children.entries[0].destroy()}setPoints(e,s){this.visualPoints=this.scene.physics.add.group(),this.pointsToWin=e;const t=e.toString();for(let i=0;i<t.length;i++){let e=this.scene.physics.add.sprite(s+50*i,50,"0");e.setScale(3),this.visualPoints.add(e)}}addPoints(e){this.points+=e,a.score=this.points;const s=this.pointsToWin.toString(),t=this.points.toString();let i=0;for(let a=s.length;a>0&&t.length>i;a--)this.visualPoints.children.entries[a-1].setTexture(t[t.length-1-i]),i+=1;this.points>=a.winScore&&this.scene.scene.start("GameEnd")}}class n{constructor(e){this.scene=e,this.enemys=this.scene.physics.add.group()}setEnemysUpDown(e){let s=[40,110,170,230,290,350,410,470,530,590,650,710,770,830,890,950],t=[];for(let i=0;i<10;i++){let i=s[Math.floor(16*Math.random())+1-1];!t.includes(i)&&i>39&&(this.setEnemy(i,0,e),t.push(i))}}setEnemy(e,s,t){var i=this.scene.physics.add.sprite(e,s,t);this.enemys.add(i),i.setScale(.09),i.setGravityY(100)}setCollisionOnCarachter(e,s){this.scene.physics.add.overlap(this.enemys,s.personaje,((e,t)=>{t.destroy(),this.scene.time.now-a.hitTime>2e3&&(s.restLife(1),this.scene.tweens.add({targets:s.personaje,alpha:0,ease:"Linear",duration:1e3,yoyo:!0}),a.hitTime=this.scene.time.now)}),null,this)}destroyEnemies(){null!=this.enemys.children&&this.enemys.children.iterate((e=>{null!=e&&e.y>this.scene.physics.world.bounds.height&&e.destroy()}))}}class r{constructor(e){this.scene=e,this.aliades=this.scene.physics.add.group()}createAliade(e){const s=Math.floor(950*Math.random()+1)+40,t=this.scene.physics.add.sprite(s,0,e);this.aliades.add(t),t.setScale(.1),t.setGravityY(50)}deleteAliade(e,s){this.scene.physics.add.overlap(this.aliades,s.personaje,((e,t)=>{s.addPoints(25),t.destroy()}),null,this)}destroyEnemies(){null!=this.aliades.children&&this.aliades.children.iterate((e=>{null!=e&&e.y>this.scene.physics.world.bounds.height&&e.destroy()}))}}class d extends t.Scene{constructor(){super("Game")}create(){a.aliade=new r(this),a.enemigo=new n(this),a.caracter=new o(this),a.hitTime=this.time.now,a.startTimeEnemy=this.time.now,a.startTimeAliade=this.time.now,this.cameras.main.setBackgroundColor(65280),a.background=this.add.image(512,384,"level_1"),a.background.alphaTopRight,a.caracter.setPersonaje(550,700,"Karl"),a.caracter.setLife(3,900),a.caracter.setPoints(a.winScore,900)}update(e,s){e-a.startTimeEnemy>2e3?(a.enemigo.setEnemysUpDown("capitalist"),a.enemigo.setCollisionOnCarachter(this,a.caracter),a.enemigo.destroyEnemies(),a.startTimeEnemy=this.time.now):e-a.startTimeAliade>1e3&&(a.aliade.createAliade("anarquist"),a.aliade.deleteAliade(this,a.caracter),a.startTimeAliade=this.time.now),a.caracter.keyMovements(),a.caracter.onTouchMovements()}}const l={fontFamily:"Arial Black",fontSize:20,color:"#ffffff",lineSpacing:5,wordWrap:{width:700,height:500},align:"center"},c={fontFamily:"Arial Black",fontSize:20,color:"#ffffff",lineSpacing:5,wordWrap:{width:400,height:500},align:"center"},h={fontFamily:"Arial Black",fontSize:60,color:"#ffffff",stroke:"#000000",strokeThickness:8,align:"center"};function u(e,s){"win"==s?(e.add.image(512,384,"fondo_victoria"),e.add.image(500,300,"dialogo").setScale(1.5,4),e.add.text(380,300,a.textos.ganador,l).setOrigin(.3,.5)):(e.add.image(512,384,"fondo_derrota"),e.add.image(500,300,"dialogo").setScale(1.5,4),e.add.text(380,300,a.textos.perdedor,l).setOrigin(.3,.5));const t=e.add.text(420,650,"Volver a jugar",h).setOrigin(.3,.5).setInteractive({cursor:"url(assets/Pointer2.cur), pointer"});t.setInteractive(),t.on("pointerdown",(()=>{e.scene.start("Game")}))}class p extends t.Scene{constructor(){super("GameEnd")}create(){a.score>=a.winScore?u(this,"win"):u(this,"lose")}}let m,g;class f extends t.Scene{constructor(){super("MainMenu")}create(){this.add.image(512,384,"background"),m=this.add.circle(100,100,80,16773232),g=this.add.image(100,100,"Martillo_hoz");const e=this.add.text(512,460,"START THE REVOLUTION",{fontFamily:"Arial Black",fontSize:38,color:"#ffffff",stroke:"#000000",strokeThickness:8,align:"center"}).setOrigin(.5);e.setInteractive({cursor:"url(assets/Pointer2.cur), pointer"}),e.on("pointerup",(function(){this.scene.start("Intro")}),this)}update(){m.x<1200?(m.x+=2,g.x+=2):("Karl"!=g.texture.key?g.setTexture("Karl"):g.setTexture("Martillo_hoz"),m.x=0,g.x=0)}}class y extends t.Scene{constructor(){super("Intro")}create(){this.add.image(512,384,"background").setAlpha(.5),function(e,s){const t=e.add.image(500,300,"dialogo");let i,o=e.add.text(380,300,a.textos.introduccion,l).setOrigin(.3,.5);t.setScale(1.5,4);const n=e.add.text(420,650,"Siguiente >>",h).setOrigin(.3,.5).setInteractive({cursor:"url(assets/Pointer2.cur), pointer"});let r=0;n.setInteractive(),n.on("pointerdown",(()=>{r++,2==r?(o.destroy(),i.destroy(),o=e.add.text(500,300,a.textos.capitalista,c).setOrigin(.3,.5),i=e.add.image(200,320,"capitalist").setScale(.3).setOrigin(.3,.5)):1==r?(o.destroy(),o=e.add.text(500,300,a.textos.bakunin,c).setOrigin(.3,.5),i=e.add.image(200,320,"anarquist").setScale(.45).setOrigin(.3,.5)):(o.destroy(),n.destroy(),o.destroy(),i.destroy(),e.scene.start("Game"))}))}(this)}}const v={type:Phaser.AUTO,width:1024,height:768,parent:"game-container",backgroundColor:"#028af8",scale:{mode:Phaser.Scale.FIT,autoCenter:Phaser.Scale.CENTER_BOTH},scene:[i,y,f,d,p],physics:{default:"arcade",arcade:{}}};new Phaser.Game(v);
